<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock title %}</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="/static/semantic-ui/semantic.min.js"></script>
    <link rel="stylesheet" href="/static/semantic-ui/semantic.min.css"/>


</head>
<body>




<div class="ui container">
    <header>
        <div class="ui secondary  menu">
            <a class="active item">
                Home
            </a>

            <div class="right menu">
                {% if request.user.is_authenticated %}
                <a class="item" href="{% url 'user:messages' %}">
                    Messages
                </a>
                <a class="ui item">
                    Logout
                </a>
                {% else %}
                <a class="ui item" href="{% url 'user:login' %}">
                    Register
                </a>
                <a class="ui item" href="{% url 'user:login' %}">
                    Login
                </a>
                {% endif %}
            </div>
        </div>
    </header>
</div>
<br>
<div class="ui container">
    {% block content %}
    {% endblock content %}


    <script>
        var socket = new WebSocket('ws://' + window.location.host + '/user/');
        socket.onopen = function open() {
            console.log('WebSockets connection created.');
        };
        socket.onmessage = function (event) {
            console.log(event.data);
        }

        if (socket.readyState == WebSocket.OPEN) {
            socket.onopen();
            socket.send(JSON.stringify({
                message: "yolo check me out in the WS frames "
            }));
        }
    </script>
</div>

</body>
</html>
